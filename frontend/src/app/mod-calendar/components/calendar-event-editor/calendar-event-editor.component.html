<div class="outer-container mat-app-background">

    <mat-tab-group class="content"
                   [mat-stretch-tabs]="false">

        <!-- Core Daten -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon material-symbols-outlined">today</mat-icon>
                <span>Termin</span>
                <span class="invalid-marker"
                      *ngIf="!mainFormValid">*</span>
            </ng-template>
            <app-calendar-event-editor-main [event]="fullEvent.core"
                                            (valid)="onMainFormValidChange($event)">
            </app-calendar-event-editor-main>
        </mat-tab>

        <!-- Wiederholungen -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon material-symbols-outlined">event_repeat</mat-icon>
                <span>Wiederholung</span>
                <span class="invalid-marker"
                      *ngIf="!recurringFormValid">*</span>
            </ng-template>
            <app-calendar-event-editor-recurring [event]="fullEvent.core"
                                                 (valid)="onRecurringFormValidChange($event)">
            </app-calendar-event-editor-recurring>
        </mat-tab>

        <!-- Personen -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon material-symbols-outlined">person</mat-icon>
                <span>Personen</span>
                <span class="invalid-marker"
                      *ngIf="!personFormValid">*</span>
            </ng-template>
            <app-calendar-event-editor-person [requiredUsers]="fullEvent.reqPersons"
                                              [optionalUsers]="fullEvent.optPersons"
                                              (valid)="onPersonFormValidChange($event)">
            </app-calendar-event-editor-person>
        </mat-tab>

        <!-- Orte -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon material-symbols-outlined">location_on</mat-icon>
                <span>Ort</span>
            </ng-template>
            <app-calendar-event-editor-location [(locationId)]="fullEvent.core.osmLocId"></app-calendar-event-editor-location>
        </mat-tab>

        <!-- Files -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon material-symbols-outlined">attach_file</mat-icon>
                <span>Anhänge</span>
            </ng-template>
            <app-calendar-event-editor-files [(attachments)]="fullEvent.attachments"
                                             (filesChange)="onUploadChange($event)">
            </app-calendar-event-editor-files>
        </mat-tab>

        <!-- Hashtags -->
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon class="tab-icon material-symbols-outlined">tag</mat-icon>
                <span>Hashtags</span>
            </ng-template>
            <app-hashtag-selector [(hashTags)]="fullEvent.hashTags"></app-hashtag-selector>
        </mat-tab>

    </mat-tab-group>

    <div class="buttons">
        <button mat-flat-button
                color="primary"
                (click)="onSave()"
                [disabled]="!isValid">Speichern</button>
        <button mat-button
                (click)="onGoBack()"
                color="primary">Zurück</button>
    </div>
</div>